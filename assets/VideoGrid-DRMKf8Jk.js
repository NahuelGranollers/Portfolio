import{a as i,u as b,j as t}from"./vendor_react-BNZICmir.js";import{a as N}from"./analytics-5SqJKOwS.js";import{m as x}from"./vendor-CjAKJ2pB.js";function v(e={}){const{threshold:d=.1,rootMargin:s="50px",freezeOnceVisible:l=!1}=e,[n,c]=i.useState(!1),p=i.useRef(null);return i.useEffect(()=>{const r=p.current;if(!r||l&&n)return;const m=new IntersectionObserver(([u])=>{c(u.isIntersecting)},{threshold:d,rootMargin:s});return m.observe(r),()=>{m.disconnect()}},[d,s,l,n]),{ref:p,isVisible:n}}const k=({video:e,onSelectVideo:d})=>{const{t:s}=b(),[l,n]=i.useState(!1),[c,p]=i.useState(!1),r=i.useRef(null),{ref:m,isVisible:u}=v({threshold:.1,rootMargin:"100px",freezeOnceVisible:!0});i.useEffect(()=>{u&&!c&&p(!0)},[u,c]);const f=()=>{if(n(!0),r.current){r.current.load();const o=()=>{r.current&&r.current.readyState>=2?(r.current.currentTime=0,r.current.play().catch(()=>{})):r.current&&setTimeout(o,100)};o()}},a=()=>{n(!1),r.current&&(r.current.pause(),r.current.currentTime=0)},h=()=>{if(n(!0),r.current){r.current.load();const o=()=>{r.current&&r.current.readyState>=2?(r.current.currentTime=0,r.current.play().catch(()=>{})):r.current&&setTimeout(o,100)};o()}},g=()=>{n(!1),r.current&&(r.current.pause(),r.current.currentTime=0)},y=()=>{e.externalLink?window.open(e.externalLink,"_blank","noopener,noreferrer"):d(e)},j=o=>{(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),y())};return t.jsxs("div",{ref:m,className:"group relative bg-brand-surface rounded-lg overflow-hidden cursor-pointer hover:shadow-2xl hover:shadow-brand-primary/20 transition-all duration-500 hover:scale-[1.02]",role:"button",tabIndex:0,onClick:y,onKeyDown:j,onMouseEnter:f,onMouseLeave:a,onTouchStart:h,onTouchEnd:g,"aria-label":`Ver proyecto: ${e.title}`,children:[t.jsx("img",{src:e.thumbnailUrl,alt:e.title,loading:"lazy",className:`w-full h-64 object-cover transition-opacity duration-300 ${l?"opacity-0":"opacity-100"}`}),t.jsx("video",{ref:r,src:e.videoUrl,muted:!0,loop:!0,playsInline:!0,preload:"none","aria-hidden":"true",className:`absolute inset-0 w-full h-64 object-cover transition-opacity duration-300 ${l?"opacity-100":"opacity-0"}`}),e.category&&t.jsx("div",{className:"absolute top-4 right-4 bg-brand-primary/80 backdrop-blur-sm px-3 py-1 rounded-full text-xs font-semibold",children:s(`categories.${e.category}`,e.category)}),e.year&&t.jsx("div",{className:"absolute top-4 left-4 bg-white/10 backdrop-blur-sm px-3 py-1 rounded-full text-xs font-semibold",children:e.year}),t.jsxs("div",{className:"p-4",children:[t.jsx("h3",{className:"text-lg font-semibold mb-2 group-hover:text-brand-primary transition",children:s(`videos.${e.id}.title`,e.title)}),e.description&&t.jsx("p",{className:"text-sm text-gray-400 mb-2 line-clamp-2",children:s(`videos.${e.id}.description`,e.description)}),e.role&&t.jsx("p",{className:"text-xs text-brand-primary font-medium mb-2",children:s(`videos.${e.id}.role`,e.role)}),e.tools&&e.tools.length>0&&t.jsx("div",{className:"flex flex-wrap gap-2",children:e.tools.map((o,w)=>t.jsx("span",{className:"text-xs bg-brand-bg px-2 py-1 rounded text-gray-400",children:o},w))})]})]})},C=({expanded:e,onClick:d,t:s})=>t.jsxs(x.button,{onClick:d,"aria-label":s(e?"projects.viewLess":"projects.viewMore"),className:"mx-auto mt-8 px-6 py-3 bg-white/5 backdrop-blur-md border border-white/10 rounded-lg hover:bg-white/10 hover:border-brand-primary transition-all duration-300 flex items-center gap-2 group",whileHover:{scale:1.05},whileTap:{scale:.95},children:[t.jsx("span",{className:"text-gray-300 font-medium",children:s(e?"projects.viewLess":"projects.viewMore")}),e?t.jsx("svg",{className:"w-5 h-5 text-gray-300 group-hover:text-brand-primary transition",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})}):t.jsx("svg",{className:"w-5 h-5 text-gray-300 group-hover:text-brand-primary transition",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})]}),S=({videos:e,onSelectVideo:d})=>{const{t:s}=b(),[l,n]=i.useState(!1),[c,p]=i.useState("all"),r=6,m=i.useMemo(()=>["all",...Array.from(new Set(e.map(h=>h.category).filter(Boolean)))],[e]),u=i.useMemo(()=>c==="all"?e:e.filter(a=>a.category===c),[e,c]),f=a=>{p(a),n(!1),N.filterChange("category",a)};return e.length===0?t.jsxs("div",{className:"text-center py-20 text-gray-400",children:[t.jsx("p",{className:"text-xl",children:s("projects.empty")}),t.jsx("p",{className:"mt-2",children:s("projects.emptyHint")})]}):t.jsx("section",{id:"proyectos",className:"py-20 px-6",children:t.jsxs("div",{className:"max-w-7xl mx-auto",children:[t.jsxs(x.div,{className:"text-center mb-12",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},children:[t.jsx("h2",{className:"text-4xl font-bold mb-4",children:s("projects.title")}),t.jsx("p",{className:"text-gray-400",children:s("projects.subtitle")})]}),t.jsx(x.div,{className:"flex flex-wrap justify-center gap-3 mb-12",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.2},children:m.map((a,h)=>t.jsx(x.button,{onClick:()=>f(a),"aria-label":s("projects.filterBy",{category:a==="all"?s("projects.all"):a}),className:`px-6 py-2 rounded-full text-sm font-medium transition-all duration-300 ${c===a?"bg-brand-primary text-white shadow-lg shadow-brand-primary/30":"bg-brand-surface text-gray-400 hover:bg-brand-surface/80 hover:text-brand-primary border border-brand-border"}`,whileHover:{scale:1.05},whileTap:{scale:.95},initial:{opacity:0,y:10},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.3,delay:h*.05},children:a==="all"?s("projects.all"):s(`categories.${a}`,a)},a))}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:(l?u:u.slice(0,r)).map(a=>t.jsx(k,{video:a,onSelectVideo:d},a.id))}),u.length===0&&t.jsx(x.div,{className:"text-center py-12 text-gray-400",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:t.jsx("p",{className:"text-lg",children:s("projects.noResults")})}),u.length>r&&t.jsx(C,{expanded:l,onClick:()=>n(!l),t:s})]})})};export{S as default};
