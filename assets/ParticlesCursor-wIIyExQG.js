import{a as l,j as te}from"./vendor_react-LWfT8_C2.js";import{S as ne,P as re,W as oe,a as se,C as F,b as W,c as ie,d as ae,A as ce,e as de}from"./vendor-D-FxXD3j.js";const he=()=>{const h=l.useRef(null),I=l.useRef(null),U=l.useRef(null),V=l.useRef(null),i=l.useRef({x:0,y:0,prevX:0,prevY:0}),p=l.useRef({x:0,y:0});return l.useEffect(()=>{var G;if(!h.current||((G=window.matchMedia)==null?void 0:G.call(window,"(prefers-reduced-motion: reduce)").matches))return;const C=new ne;I.current=C;const m=new re(75,window.innerWidth/window.innerHeight,.1,1e3);m.position.z=100;const o=new oe({alpha:!0,antialias:!1,powerPreference:"high-performance"});o.setSize(window.innerWidth,window.innerHeight),o.setPixelRatio(window.devicePixelRatio*.5),o.setClearColor(0,0),h.current.appendChild(o.domElement),U.current=o;const a=new se,c=20,f=new Float32Array(c*3),x=new Float32Array(c*3),H=new Float32Array(c),s=new Float32Array(c*3),y=new Float32Array(c),L=[new F(12289788),new F(252614),new F(16777215).multiplyScalar(.4)];for(let r=0;r<c;r++){const t=r*3;f[t]=(Math.random()-.5)*400,f[t+1]=(Math.random()-.5)*350,f[t+2]=(Math.random()-.5)*200;const w=L[Math.floor(Math.random()*L.length)];x[t]=w.r,x[t+1]=w.g,x[t+2]=w.b,H[r]=Math.random()*3+2,s[t]=(Math.random()-.5)*.08,s[t+1]=(Math.random()-.5)*.08,s[t+2]=(Math.random()-.5)*.05,y[r]=Math.random()*Math.PI*2}a.setAttribute("position",new W(f,3)),a.setAttribute("color",new W(x,3)),a.setAttribute("size",new W(H,1));const M=document.createElement("canvas");M.width=64,M.height=64;const z=M.getContext("2d"),g=z.createRadialGradient(32,32,0,32,32,32);g.addColorStop(0,"rgba(255,255,255,1)"),g.addColorStop(.3,"rgba(255,255,255,0.8)"),g.addColorStop(1,"rgba(255,255,255,0)"),z.fillStyle=g,z.fillRect(0,0,64,64);const T=new ie(M),j=new ae({size:4,map:T,vertexColors:!0,transparent:!0,opacity:.3,sizeAttenuation:!0,fog:!1,blending:ce,depthWrite:!1}),v=new de(a,j);C.add(v),V.current=v;const u={x:0,y:0},Y=r=>{u.x=r.clientX/window.innerWidth*2-1,u.y=-(r.clientY/window.innerHeight)*2+1};window.addEventListener("mousemove",Y,{passive:!0});let R=0;const q=()=>{if(requestAnimationFrame(q),R+=.016,v){i.current.x+=(u.x-i.current.x)*.08,i.current.y+=(u.y-i.current.y)*.08;const t=u.x-i.current.x,w=u.y-i.current.y;p.current.x=t,p.current.y=w;const k=Math.sqrt(t**2+w**2),E=Math.min(k*8,1);v.rotation.y+=2e-4;const X=a.getAttribute("position"),n=X.array,D=a.getAttribute("size"),J=D.array;for(let d=0;d<c;d++){const e=d*3,K=n[e],N=n[e+1];n[e+2];const S=i.current.x*180-K,P=i.current.y*180-N,A=Math.sqrt(S*S+P*P);let b=0;A<100?b=E>.05?-.015*E:.005:A<220&&(b=.002);const O=Math.sin(R*.4+y[d])*.25,Q=Math.cos(R*.35+y[d])*.25,Z=S*b*.3+s[e]*.5+O,_=P*b*.3+s[e+1]*.5+Q;n[e]+=Z*.5,n[e+1]+=_*.5,n[e+2]+=s[e+2]*.25,Math.abs(n[e])>250&&(s[e]*=-.6,n[e]=Math.sign(n[e])*250),Math.abs(n[e+1])>200&&(s[e+1]*=-.6,n[e+1]=Math.sign(n[e+1])*200),Math.abs(n[e+2])>120&&(s[e+2]*=-.6,n[e+2]=Math.sign(n[e+2])*120);const $=A<100?1+(1-A/100)*.4*E:1,ee=1+Math.sin(R*1.2+y[d])*.08;J[d]=(2+Math.random()*3)*$*ee}X.needsUpdate=!0,D.needsUpdate=!0,p.current.x*=.88,p.current.y*=.88}o.render(C,m)};q();const B=()=>{m.aspect=window.innerWidth/window.innerHeight,m.updateProjectionMatrix(),o.setSize(window.innerWidth,window.innerHeight)};return window.addEventListener("resize",B),()=>{var r,t;window.removeEventListener("mousemove",Y),window.removeEventListener("resize",B),o.dispose(),a.dispose(),j.dispose(),(r=h.current)!=null&&r.contains(o.domElement)&&((t=h.current)==null||t.removeChild(o.domElement))}},[]),te.jsx("div",{ref:h,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:-1,pointerEvents:"none"}})};export{he as default};
