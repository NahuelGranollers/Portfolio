import{r as d,j as B}from"./vendor_react-Cr0Yh2fz.js";import{S as q,P as G,W as U,B as I,C as O,a as W,b as X,c as Y}from"./vendor-DSFFTp3v.js";const K=()=>{const u=d.useRef(null),H=d.useRef(null),L=d.useRef(null),F=d.useRef(null),h=d.useRef({x:0,y:0});return d.useEffect(()=>{if(!u.current)return;const f=new q;H.current=f;const l=new G(75,window.innerWidth/window.innerHeight,.1,1e3);l.position.z=100;const o=new U({alpha:!0,antialias:!1,powerPreference:"high-performance"});o.setSize(window.innerWidth,window.innerHeight),o.setPixelRatio(window.devicePixelRatio*.5),o.setClearColor(0,0),u.current.appendChild(o.domElement),L.current=o;const a=new I,c=50,p=new Float32Array(c*3),M=new Float32Array(c*3),r=new Float32Array(c*3),m=new Float32Array(c);for(let n=0;n<c;n++){const t=n*3;p[t]=(Math.random()-.5)*400,p[t+1]=(Math.random()-.5)*300,p[t+2]=(Math.random()-.5)*200;const x=Math.random()*.35+.45,i=new O().setHSL(x,.6,.55);M[t]=i.r,M[t+1]=i.g,M[t+2]=i.b,r[t]=(Math.random()-.5)*.3,r[t+1]=(Math.random()-.5)*.3,r[t+2]=(Math.random()-.5)*.3,m[n]=Math.random()*100}a.setAttribute("position",new W(p,3)),a.setAttribute("color",new W(M,3));const A=new X({size:1.8,vertexColors:!0,transparent:!0,opacity:.2,sizeAttenuation:!0,fog:!1}),w=new Y(a,A);f.add(w),F.current=w;const R=n=>{h.current.x=n.clientX/window.innerWidth*2-1,h.current.y=-(n.clientY/window.innerHeight)*2+1};window.addEventListener("mousemove",R);let b=0;const C=()=>{if(requestAnimationFrame(C),b++,b%2!==0){o.render(f,l);return}if(w){w.rotation.x+=5e-5,w.rotation.y+=15e-5;const n=a.getAttribute("position"),t=n.array,x=a.getAttribute("color"),i=x.array;for(let s=0;s<c;s++){const e=s*3;m[s]++;const z=200,y=Math.max(0,1-m[s]/z);m[s]>z&&(t[e]=(Math.random()-.5)*400,t[e+1]=(Math.random()-.5)*300,t[e+2]=(Math.random()-.5)*200,m[s]=0,r[e]=(Math.random()-.5)*.3,r[e+1]=(Math.random()-.5)*.3,r[e+2]=(Math.random()-.5)*.3);const S=t[e],j=t[e+1];t[e+2];const g=h.current.x*120-S,v=h.current.y*120-j,P=Math.sqrt(g*g+v*v)<180?.008:0;t[e]+=g*P+r[e],t[e+1]+=v*P+r[e+1],t[e+2]+=r[e+2],Math.abs(t[e])>220&&(r[e]*=-.8,t[e]=Math.sign(t[e])*220),Math.abs(t[e+1])>170&&(r[e+1]*=-.8,t[e+1]=Math.sign(t[e+1])*170),Math.abs(t[e+2])>120&&(r[e+2]*=-.8,t[e+2]=Math.sign(t[e+2])*120),i[e]=(i[e]*.7+.3)*y,i[e+1]=(i[e+1]*.7+.3)*y,i[e+2]=(i[e+2]*.7+.3)*y}n.needsUpdate=!0,x.needsUpdate=!0}o.render(f,l)};C();const E=()=>{l.aspect=window.innerWidth/window.innerHeight,l.updateProjectionMatrix(),o.setSize(window.innerWidth,window.innerHeight)};return window.addEventListener("resize",E),()=>{var n,t;window.removeEventListener("mousemove",R),window.removeEventListener("resize",E),o.dispose(),a.dispose(),A.dispose(),(n=u.current)!=null&&n.contains(o.domElement)&&((t=u.current)==null||t.removeChild(o.domElement))}},[]),B.jsx("div",{ref:u,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1,pointerEvents:"none"}})};export{K as default};
